{% extends 'base.html' %}
{% block content %}
<h1 class="mb-4">Add Log</h1>
<form method="POST" action="{{ url_for('add_log') }}">
    <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea class="form-control" id="description" name="description" rows="3" required></textarea>
    </div>
    <div class="mb-3">
        <label class="form-label">Related Bins</label>
        <div>
            <button type="button" class="btn btn-sm btn-secondary" id="select-all">Select All</button>
            <button type="button" class="btn btn-sm btn-secondary" id="select-none">Select None</button>
        </div>
        <div class="form-check">
            {% for bin in bins %}
            <div>
                <input class="form-check-input" type="checkbox" id="bin_{{ bin.id }}" name="bin_ids" value="{{ bin.id }}">
                <label class="form-check-label" for="bin_{{ bin.id }}">{{ bin.name }}</label>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="mb-3">
        <label for="timestamp" class="form-label">Date</label>
        <input type="date" class="form-control" id="timestamp" name="timestamp" required>
    </div>
    <button type="submit" class="btn btn-primary">Add Log</button>
</form>

<script>
    document.getElementById('select-all').addEventListener('click', function() {
        document.querySelectorAll('input[name="bin_ids"]').forEach(checkbox => checkbox.checked = true);
    });
    document.getElementById('select-none').addEventListener('click', function() {
        document.querySelectorAll('input[name="bin_ids"]').forEach(checkbox => checkbox.checked = false);
    });
</script>
{% endblock %}
